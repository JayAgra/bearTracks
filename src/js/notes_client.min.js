var quill=new Quill("#editor",{theme:"snow"});window.currentEvent=0,window.currentTeam=0,document.getElementById("editor").style.display="none";const waitMs=e=>new Promise(t=>setTimeout(t,e));function goToHome(){history.back()}async function getNote(){eventCode=document.getElementById("eventCode").value,teamNumber=document.getElementById("teamNumber").value,window.currentEvent=eventCode,window.currentTeam=teamNumber,document.getElementById("viewNoteButton").innerHTML="Requesting Data...";let e=new XMLHttpRequest;e.open("GET",`/api/notes/${eventCode}/${teamNumber}/getNotes`,!0),e.withCredentials=!0,e.onreadystatechange=async()=>{if(e.readyState===XMLHttpRequest.DONE&&200===e.status)console.log("200 ok"),console.log(e.responseText),document.getElementById("viewNoteButton").innerHTML="Rendering View...",document.getElementById("searchContainer").style.display="none",document.getElementById("edit").style.display="inherit",document.getElementById("editor").style.display="inherit",document.getElementById("viewNoteButton").innerHTML="View",quill.setContents(JSON.parse(e.responseText));else if(401===e.status||403===e.status)window.location.href="/login";else if(400===e.status)document.getElementById("viewNoteButton").innerHTML="bad request";else if(500===e.status)document.getElementById("viewNoteButton").innerHTML="500 Internal Server Error";else if(204===e.status&&3266==e.responseText){let t=new XMLHttpRequest;t.open("GET",`/api/notes/${eventCode}/${teamNumber}/createNote`,!0),t.withCredentials=!0,t.onreadystatechange=async()=>{t.readyState===XMLHttpRequest.DONE&&200===t.status?3201==t.responseText&&getNote():401===t.status||403===t.status?window.location.href="/login":400===t.status?document.getElementById("viewNoteButton").innerHTML="bad request":500===t.status?document.getElementById("viewNoteButton").innerHTML="internal server error":document.getElementById("viewNoteButton").innerHTML="downloading data..."},t.send()}else document.getElementById("viewNoteButton").innerHTML="Downloading Data..."},e.send()}function saveNote(){eventCode=document.getElementById("eventCode").value,teamNumber=document.getElementById("teamNumber").value,document.getElementById("saveNoteButton").innerHTML="Saving Data...";let e=new XMLHttpRequest;e.open("POST",`/api/notes/${eventCode}/${teamNumber}/updateNotes`,!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.withCredentials=!0,e.onreadystatechange=async()=>{e.readyState===XMLHttpRequest.DONE&&200===e.status?(document.getElementById("saveNoteButton").innerHTML="rendering...",document.getElementById("saveNoteButton").innerHTML="saved!",await waitMs(1e3),document.getElementById("saveNoteButton").innerHTML="save"):401===e.status||403===e.status?window.location.href="/login":400===e.status?document.getElementById("viewNoteButton").innerHTML="bad request":500===e.status?document.getElementById("viewNoteButton").innerHTML="internal server error":document.getElementById("viewNoteButton").innerHTML="downloading data..."},e.send("save="+JSON.stringify(quill.getContents()))}