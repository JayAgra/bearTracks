function newSearch(){location.reload()}function goToHome(){window.location.href="/"}function mainOrPitLink(){return"pit"===document.getElementById("db").value?"pitimages":"detail"}async function getData(){document.getElementById("viewData").innerHTML="requesting...";try{e=await fetch(`/api/manage/${document.getElementById("db").value}/list`,{method:"GET",credentials:"include",redirect:"follow"}),403===e.status&&(document.getElementById("viewData").innerHTML="access denied"),401===e.status&&(window.location.href="/login"),t=await e.json();for(var e,t,n="",a=t.length-1;a>=0;a--)n+=`<fieldset><span><span>ID:&emsp;${t[a].id}</span>&emsp;&emsp;<span><a href="/${mainOrPitLink()}?id=${t[a].id}" style="all: unset; color: #2997FF; text-decoration: none;">View</a>&emsp;<span onclick="deleteSubmission('${document.getElementById("db").value}', ${t[a].id}, '${document.getElementById("db").value}${t[a].id}')" style="color: red" id="${document.getElementById("db").value}${t[a].id}">Delete</span></span></span></fieldset>`;document.getElementById("resultsInsert").insertAdjacentHTML("afterbegin",n),document.getElementById("search").style.display="none",document.getElementById("results").style.display="flex"}catch(i){console.log("failure"),document.getElementById("viewData").innerHTML="internal server error",console.error(i)}}async function deleteSubmission(e,t,n){document.getElementById(n).innerHTML="Preparing Request...";let a=new XMLHttpRequest;a.open("GET",`/api/manage/${e}/${t}/delete`,!0),a.withCredentials=!0,a.onreadystatechange=()=>{a.readyState===XMLHttpRequest.DONE&&200===a.status?(console.log(a.responseText),document.getElementById(n).innerHTML="deleted!"):403===a.status?document.getElementById(n).innerHTML="access denied":401===a.status?window.location.href="/login":500===a.status?document.getElementById(n).innerHTML="500 bad request":document.getElementById(n).innerHTML="deleting..."},a.send()}