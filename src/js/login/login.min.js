import{_get as e}from"../_modules/get/get.min.js";import{_dErr as t}from"../_modules/dErr/dErr.min.js";var _0x0=!1,_0x1="";let _0x2=document.getElementById("next"),_0x3=document.getElementById("inputInfo"),_0x4=document.getElementById("currentUsername"),_0x5=document.getElementById("pw"),_0x6=document.getElementById("createAct"),_0x7=document.getElementById("error"),_0x8=document.getElementById("inputPassword");function _0x9(){t(["500 internal server error","invalid credentials","account not yet approved","",])}_0x2.addEventListener("click",async()=>{if(_0x7.innerText="",_0x0){let t;await e("/api/auth/authPasskey/"+_0x1,"error").then(async e=>{t=await SimpleWebAuthnBrowser.startAuthentication(e)}).catch(e=>{throw _0x7.innerText="unknown error getting challenge",Error("unhandled error \uD83D\uDE2D")});let a=await (await fetch("/api/auth/verifyAuthPasskey/"+_0x1,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();a&&a.verified?window.location.href="/":(_0x7.innerText="bad passkey",await new Promise(e=>setTimeout(e,2e3)),window.location.reload())}else{if(0===_0x3.value.length&&""===_0x1){_0x3.classList.add("shakeInput"),await new Promise(e=>setTimeout(e,500)),_0x3.classList.remove("shakeInput");return}_0x3.classList.add("fade"),_0x4.firstChild.innerText="username",_0x4.children[1].innerText=_0x3.value,_0x2.classList.add("nextStepPk"),_0x3.classList.add("fadeIn"),_0x3.placeholder="password",_0x3.setAttribute("autocomplete","current-password"),_0x3.setAttribute("type","password"),_0x1=_0x3.value,_0x5.style.opacity=0,_0x5.style.display="",_0x5.classList.add("nextStepPw"),_0x6.classList.add("moveDown"),await new Promise(e=>setTimeout(e,100)),_0x3.style.display="none",_0x8.style.display="unset",_0x0=!0}}),_0x5.onclick=()=>{document.getElementById("artUsername").value=_0x1,document.getElementById("artPassword").value=_0x8.value,document.getElementById("artForm").submit()},window.displayErrors=_0x9;