async function getTeamData(){var e,t;try{e=await fetch("/api/manage/teams/list",{method:"GET",credentials:"include",redirect:"follow"}),(401===e.status||403===e.status)&&(window.location.href="/login"),t=await e.json();for(var a="",n=0;n<t.length;n++)a+=`<tr class="padded"><td>${t[n].team}</td><td><div class="inlineInput"><input type="tel" id="${t[n].id}_key_input" value="${t[n].key}" style="min-width: 150px"><button class="uiButton actionButton" onclick="updateKey('${t[n].id}', "${t[n].id}_key_input", this)">save</button><button class="uiButton cancelButton" onclick="revokeTeamKey('${t[n].id}', this)">delete</button></div></td></tr>`;document.getElementById("teamsTableHead").insertAdjacentHTML("afterend",a)}catch(i){console.log("failure"),window.location.href="/login"}}async function updateKey(e,t,a){a.innerText="...";try{var n=await fetch(`/api/manage/teams/updateKey/${e}/${document.getElementById(t).value}`,{method:"GET",credentials:"include",redirect:"follow"});(401===n.status||403===n.status)&&(window.location.href="/login");let i=await n.text();i==String(3207)?a.innerText="done":a.innerText="error"}catch(l){console.log("failure"),window.location.href="/login"}}async function revokeTeamKey(e,t){t.innerText="...";try{var a=await fetch(`/api/manage/teams/deleteKey/${e}`,{method:"GET",credentials:"include",redirect:"follow"});(401===a.status||403===a.status)&&(window.location.href="/login");let n=await a.text();n==String(3207)?t.innerText="done":t.innerText="error"}catch(i){console.log("failure"),window.location.href="/login"}}function setupTeamKeyCreate(){document.getElementById("mainsect").style.display="none",document.getElementById("createKey").style.display="flex"}async function createTeamKey(){let e=document.getElementById("newTeamKey_btn"),t=Number(document.getElementById("newTeamKey_key").value),a=Number(document.getElementById("newTeamKey_team").value);e.innerText="...";try{var n=await fetch(`/api/manage/teams/createKey/${t}/${a}`,{method:"GET",credentials:"include",redirect:"follow"});(401===n.status||403===n.status)&&(window.location.href="/login");let i=await n.text();i==String(3207)?(e.innerText="done!",await new Promise(e=>setTimeout(e,250)),window.location.reload()):e.innerText="error!"}catch(l){console.log("failure"),window.location.href="/login"}}