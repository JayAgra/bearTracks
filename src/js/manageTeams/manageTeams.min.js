import{_delete as e}from"../_modules/delete/delete.min.js";import{_get as t}from"../_modules/get/get.min.js";import{_patch as a}from"../_modules/patch/patch.min.js";import{_post as n}from"../_modules/post/post.min.js";async function getTeamData(){t("/api/manage/teams/list",null).then(e=>{for(var t="",a=0;a<e.length;a++)t+=`<tr class="padded"><td>${e[a].team}</td><td><div class="inlineInput"><input type="tel" id="${e[a].id}_key_input" value="${e[a].key}" style="min-width: 150px"><button class="uiButton actionButton" onclick="updateKey('${e[a].id}', "${e[a].id}_key_input", this)">save</button><button class="uiButton cancelButton" onclick="revokeTeamKey('${e[a].id}', this)">delete</button></div></td></tr>`;document.getElementById("teamsTableHead").insertAdjacentHTML("afterend",t)}).catch(e=>console.log(e))}async function updateKey(e,t,n){n.innerText="...",a(`/api/manage/teams/updateKey/${e}/${document.getElementById(t).value}`,n.id).then(e=>{3207===e.status?n.innerText="done":n.innerText="error"}).catch(e=>console.log(e))}async function revokeTeamKey(t,a){a.innerText="...",e(`/api/manage/teams/deleteKey/${t}`,a.id).then(e=>{3207===e.status?a.innerText="done":a.innerText="error"}).catch(e=>console.log(e))}function setupTeamKeyCreate(){document.getElementById("mainsect").style.display="none",document.getElementById("createKey").style.display="unset"}async function createTeamKey(){let e=document.getElementById("newTeamKey_btn"),t=Number(document.getElementById("newTeamKey_key").value),a=Number(document.getElementById("newTeamKey_team").value);e.innerText="...",n(`/api/manage/teams/createKey/${t}/${a}`,e.id,{}).then(async t=>{3207===t.status?(e.innerText="done!",await new Promise(e=>setTimeout(e,250)),window.location.reload()):e.innerText="error"}).catch(e=>console.log(e))}window.getTeamData=getTeamData,window.updateKey=updateKey,window.revokeTeamKey=revokeTeamKey,window.setupTeamKeyCreate=setupTeamKeyCreate,window.createTeamKey=createTeamKey;