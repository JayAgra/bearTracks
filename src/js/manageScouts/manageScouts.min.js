async function getData(){var t,e;try{t=await fetch("/api/scouts",{method:"GET",credentials:"include",redirect:"follow"}),(401===t.status||403===t.status)&&(window.location.href="/login"),e=await t.json();for(var n="",i=0;i<e.length;i++)"true"==e[i].accessOk?"true"==e[i].admin?n+=`<tr class="padded"><td>${e[i].nickName} (${e[i].team})</td><td>${e[i].score}<div class="inlineInput"><input type="tel" id="${e[i].id}_input" value="${e[i].score}" style="min-width: 150px"><button class="uiButton actionButton" onclick="updateUser('${e[i].id}', ${e[i].score}, this)">save</button></td><td><button class="uiButton cancelButton" onclick="revokeKey('${e[i].id}', this)">logout</button><button class="uiButton cancelButton" onclick="removeAdmin('${e[i].id}', this)">remove admin</button></div></td></tr>`:0!==e[i].teamAdmin?n+=`<tr class="padded"><td>${e[i].nickName} (${e[i].team})</td><td>${e[i].score}<div class="inlineInput"><input type="tel" id="${e[i].id}_input" value="${e[i].score}" style="min-width: 150px"><button class="uiButton actionButton" onclick="updateUser('${e[i].id}', ${e[i].score}, this)">save</button></td><td><button class="uiButton cancelButton" onclick="revokeKey('${e[i].id}', this)">logout</button><button class="uiButton cancelButton" onclick="removeTeamAdmin('${e[i].id}', this)">remove team admin</button><button class="uiButton cancelButton" onclick="makeAdmin('${e[i].id}', this)">make admin</button></div></td></tr>`:n+=`<tr class="padded"><td>${e[i].nickName} (${e[i].team})</td><td>${e[i].score}<div class="inlineInput"><input type="tel" id="${e[i].id}_input" value="${e[i].score}" style="min-width: 150px"><button class="uiButton actionButton" onclick="updateUser('${e[i].id}', ${e[i].score}, this)">save</button></td><td><button class="uiButton cancelButton" onclick="revokeKey('${e[i].id}', this)">logout</button><button class="uiButton cancelButton" onclick="makeTeamAdmin('${e[i].id}', '${e[i].team}', this)">make team admin</button><button class="uiButton cancelButton" onclick="makeAdmin('${e[i].id}', this)">make admin</button></div></td></tr>`:n+=`<tr class="padded"><td>${e[i].nickName} (${e[i].team})</td><td>${e[i].score}</td><td><div class="inlineInput"><button class="uiButton returnButton" onclick="approveUser('${e[i].id}', this)">approve user</button></div></td></tr>`;document.getElementById("tableHeader").insertAdjacentHTML("afterend",n)}catch(a){console.log("failure"),window.location.href="/login"}}async function updateUser(t,e,n){n.innerText="...";let i=Number(document.getElementById(`${t}_input`).value)-Number(e);try{var a=await fetch(`/api/manage/user/points/${t}/${i}/${Number(document.getElementById("reason").value)}`,{method:"GET",credentials:"include",redirect:"follow"});(401===a.status||403===a.status)&&(window.location.href="/login");let o=await a.text();o==String(3204)?n.innerText="done":n.innerText="error"}catch(r){console.log("failure"),window.location.href="/login"}}async function approveUser(t,e){e.innerText="...";try{var n=await fetch(`/api/manage/user/access/${t}/true`,{method:"GET",credentials:"include",redirect:"follow"});(401===n.status||403===n.status)&&(window.location.href="/login");let i=await n.text();i==String(3206)?e.innerText="done":e.innerText="error"}catch(a){console.log("failure"),window.location.href="/login"}}async function revokeKey(t,e){e.innerText="...";try{var n=await fetch(`/api/manage/user/revokeKey/${t}`,{method:"GET",credentials:"include",redirect:"follow"});(401===n.status||403===n.status)&&(window.location.href="/login");let i=await n.text();i==String(3207)?e.innerText="done":e.innerText="error"}catch(a){console.log("failure"),window.location.href="/login"}}async function makeAdmin(t,e){e.innerText="...";try{var n=await fetch(`/api/manage/user/updateAdmin/${t}/true`,{method:"GET",credentials:"include",redirect:"follow"});(401===n.status||403===n.status)&&(window.location.href="/login");let i=await n.text();i==String(3207)?e.innerText="done":e.innerText="error"}catch(a){console.log("failure"),window.location.href="/login"}}async function removeAdmin(t,e){e.innerText="...";try{var n=await fetch(`/api/manage/user/updateAdmin/${t}/false`,{method:"GET",credentials:"include",redirect:"follow"});(401===n.status||403===n.status)&&(window.location.href="/login");let i=await n.text();i==String(3207)?e.innerText="done":e.innerText="error"}catch(a){console.log("failure"),window.location.href="/login"}}async function makeTeamAdmin(t,e,n){n.innerText="...";try{var i=await fetch(`/api/manage/user/updateTeamAdmin/${t}/${e}`,{method:"GET",credentials:"include",redirect:"follow"});(401===i.status||403===i.status)&&(window.location.href="/login");let a=await i.text();a==String(3207)?n.innerText="done":n.innerText="error"}catch(o){console.log("failure"),window.location.href="/login"}}async function removeTeamAdmin(t,e){e.innerText="...";try{var n=await fetch(`/api/manage/user/updateTeamAdmin/${t}/0`,{method:"GET",credentials:"include",redirect:"follow"});(401===n.status||403===n.status)&&(window.location.href="/login");let i=await n.text();i==String(3207)?e.innerText="done":e.innerText="error"}catch(a){console.log("failure"),window.location.href="/login"}}