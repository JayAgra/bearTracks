function createChartDataset(e,t,a){return{label:e,data:a,fill:!0,borderColor:t,tension:.1}}function createChartData(e,t){return{labels:e,datasets:t}}function createChartConfig(e,t,a,r){return{type:e,data:t,options:{indexAxis:"x",responsive:!0,scales:{y:{min:0,max:r}},plugins:{title:{display:!0,text:a}}}}}function setNoResults(){document.getElementById("error").innerHTML="&emsp;no results",document.getElementById("error").style.display="unset"}async function constructGraphs(){var e=[],t=[],a=[];try{const s=await fetch(`/api/teams/event/current/${document.getElementById("eventCode").value}/${document.getElementById("teamNum").value}/weight`,{method:"GET",credentials:"include",redirect:"follow"});401!==s.status&&403!==s.status||(window.location.href="/login"),204!==s.status&&s.ok||setNoResults(),(await s.json()).forEach((a=>{e.includes(a.match)||(e.push(a.match),t.push({match:a.match,autoCharge:Number(a.game5),teleopCharge:Number(a.game10),cycle:Number(a.game11),lowCubes:Number(a.game21),lowCones:Number(a.game13),midCubes:Number(a.game14),midCones:Number(a.game15),highCubes:Number(a.game16),highCones:Number(a.game17),lowPcs:Number(a.game18),midPcs:Number(a.game19),highPcs:Number(a.game20),cubes:Number(a.game23),cones:Number(a.game24),grid:Number(a.game25),weight:Number(a.weight.split(",")[0])}))}));var r={autoCharge:[],teleopCharge:[],cycle:[],lowCubes:[],lowCones:[],midCubes:[],midCones:[],highCubes:[],highCones:[],lowPcs:[],midPcs:[],highPcs:[],cubes:[],cones:[],grid:[],weight:[]};t.sort(((e,t)=>e.match-t.match)),t.forEach((e=>{a.push(String(e.match)),r.autoCharge.push(e.autoCharge),r.teleopCharge.push(e.teleopCharge),r.cycle.push(e.cycle),r.lowCubes.push(e.lowCubes),r.lowCones.push(e.lowCones),r.midCubes.push(e.midCubes),r.midCones.push(e.midCones),r.highCubes.push(e.highCubes),r.highCones.push(e.highCones),r.lowPcs.push(e.lowPcs),r.midPcs.push(e.midPcs),r.highPcs.push(e.highPcs),r.cubes.push(e.cubes),r.cones.push(e.cones),r.grid.push(e.grid),r.weight.push(e.weight)}));const h=createChartConfig("line",createChartData(a,[createChartDataset("PERFORMANCE SCORE","#8ec07c",r.weight)]),"Match Performance Score",160),n=createChartConfig("line",createChartData(a,[createChartDataset("GRID POINTS","#8ec07c",r.grid)]),"Grid Points",160),C=createChartConfig("line",createChartData(a,[createChartDataset("CONES","#ff0",r.cones),createChartDataset("CUBES","#a216a2",r.cubes)]),"Cones & Cubes",18),c=createChartConfig("line",createChartData(a,[createChartDataset("AUTO","#b8bb26",r.autoCharge),createChartDataset("TELEOP","#83a598",r.teleopCharge)]),"Auto & Teleop Charging",14),o=createChartConfig("line",createChartData(a,[createChartDataset("CYCLE TIME","#8ec07c",r.cycle)]),"Cycle Time",120),u=createChartConfig("line",createChartData(a,[createChartDataset("LOW","#b8bb26",r.lowPcs),createChartDataset("MID","#fabd2f",r.midPcs),createChartDataset("HIGH","#83a598",r.highPcs)]),"Scoring Levels",10),i=createChartConfig("line",createChartData(a,[createChartDataset("CONES","#ff0",r.lowCones),createChartDataset("CUBES","#a216a2",r.lowCubes)]),"Low Cones & Cubes",10),m=createChartConfig("line",createChartData(a,[createChartDataset("CONES","#ff0",r.midCones),createChartDataset("CUBES","#a216a2",r.midCubes)]),"Mid Cones & Cubes",10),l=createChartConfig("line",createChartData(a,[createChartDataset("CONES","#ff0",r.highCones),createChartDataset("CUBES","#a216a2",r.highCubes)]),"High Cones & Cubes",10);new Chart(document.getElementById("weightChart"),h),new Chart(document.getElementById("gridPtsChart"),n),new Chart(document.getElementById("allConeCubeChart"),C),new Chart(document.getElementById("chargeChart"),c),new Chart(document.getElementById("cycleTimeChart"),o),new Chart(document.getElementById("allLevelsChart"),u),new Chart(document.getElementById("lowConeCubeChart"),i),new Chart(document.getElementById("midConeCubeChart"),m),new Chart(document.getElementById("highConeCubeChart"),l);document.getElementById("teamAtEvent").innerText=document.getElementById("teamNum").value,document.getElementById("search").style.display="none",document.getElementById("results").style.display="flex"}catch(e){setNoResults()}}