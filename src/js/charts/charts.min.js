function createChartDataset(e,t,a){return{label:e,data:a,fill:!0,borderColor:t,tension:.1}}function createChartData(e,t){return{labels:e,datasets:t}}function createChartConfig(e,t,a){return{type:e,data:t,options:{indexAxis:"y",responsive:!0,scales:{yAxes:[{min:0}]},plugins:{title:{display:!0,text:a}}}}}async function constructGraphs(){var e,t=[],a=[],s=[];try{let r=await fetch(`/api/teams/event/current/${document.getElementById("eventCode").value}/${document.getElementById("teamNum").value}/weight`,{method:"GET",credentials:"include",redirect:"follow"});(401===r.status||403===r.status)&&(window.location.href="/login"),204!==r.status&&r.ok||(document.getElementById("error").innerHTML="&emsp;no results",document.getElementById("error").style.display="unset"),(e=await r.json()).forEach(e=>{t.includes(e.match)||(t.push(e.match),s.push(String(e.match)),a.push({match:e.match,autoCharge:Number(e.game5),teleopCharge:Number(e.game10),cycle:Number(e.game11),lowCubes:Number(e.game21),lowCones:Number(e.game13),midCubes:Number(e.game14),midCones:Number(e.game15),highCubes:Number(e.game16),highCones:Number(e.game17),lowPcs:Number(e.game18),midPcs:Number(e.game19),highPcs:Number(e.game20),cubes:Number(e.game23),cones:Number(e.game24),grid:Number(e.game25),weight:Number(e.weight.split(",")[0])}))});var h={autoCharge:[],teleopCharge:[],cycle:[],lowCubes:[],lowCones:[],midCubes:[],midCones:[],highCubes:[],highCones:[],lowPcs:[],midPcs:[],highPcs:[],cubes:[],cones:[],grid:[],weight:[]};a.sort((e,t)=>e[0]-t[0]),a.forEach(e=>{h.autoCharge.push(e.autoCharge),h.teleopCharge.push(e.teleopCharge),h.cycle.push(e.cycle),h.lowCubes.push(e.lowCubes),h.lowCones.push(e.lowCones),h.midCubes.push(e.midCubes),h.midCones.push(e.midCones),h.highCubes.push(e.highCubes),h.highCones.push(e.highCones),h.lowPcs.push(e.lowPcs),h.midPcs.push(e.midPcs),h.highPcs.push(e.highPcs),h.cubes.push(e.cubes),h.cones.push(e.cones),h.grid.push(e.grid),h.weight.push(e.weight)});let C=createChartConfig("line",createChartData(s,[createChartDataset("PERFORMANCE SCORE","#8ec07c",h.weight)]),"Match Performance Score"),n=createChartConfig("line",createChartData(s,[createChartDataset("GRID POINTS","#8ec07c",h.grid)]),"Grid Points"),c=createChartConfig("line",createChartData(s,[createChartDataset("CONES","#ff0",h.cones),createChartDataset("CUBES","#a216a2",h.cubes)]),"Cones & Cubes"),i=createChartConfig("line",createChartData(s,[createChartDataset("AUTO","#b8bb26",h.autoCharge),createChartDataset("TELEOP","#83a598",h.teleopCharge)]),"Auto & Teleop Charging"),o=createChartConfig("line",createChartData(s,[createChartDataset("CYCLE TIME","#8ec07c",h.cycle)]),"Cycle Time"),l=createChartConfig("line",createChartData(s,[createChartDataset("LOW","#b8bb26",h.lowPcs),createChartDataset("MID","#fabd2f",h.midPcs),createChartDataset("HIGH","#83a598",h.highPcs)]),"Scoring Levels"),g=createChartConfig("line",createChartData(s,[createChartDataset("CONES","#ff0",h.lowCones),createChartDataset("CUBES","#a216a2",h.lowCubes)]),"Low Cones & Cubes"),u=createChartConfig("line",createChartData(s,[createChartDataset("CONES","#ff0",h.midCones),createChartDataset("CUBES","#a216a2",h.midCubes)]),"Mid Cones & Cubes"),m=createChartConfig("line",createChartData(s,[createChartDataset("CONES","#ff0",h.highCones),createChartDataset("CUBES","#a216a2",h.highCubes)]),"High Cones & Cubes");new Chart(document.getElementById("weightChart"),C),new Chart(document.getElementById("gridPtsChart"),n),new Chart(document.getElementById("allConeCubeChart"),c),new Chart(document.getElementById("chargeChart"),i),new Chart(document.getElementById("cycleTimeChart"),o),new Chart(document.getElementById("allLevelsChart"),l),new Chart(document.getElementById("lowConeCubeChart"),g),new Chart(document.getElementById("midConeCubeChart"),u),new Chart(document.getElementById("highConeCubeChart"),m),document.getElementById("teamAtEvent").innerText=document.getElementById("teamNum").value,document.getElementById("search").style.display="none",document.getElementById("results").style.display="flex"}catch(d){document.getElementById("error").innerHTML="&emsp;no results",document.getElementById("error").style.display="unset"}}