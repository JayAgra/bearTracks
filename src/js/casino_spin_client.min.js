window.alreadySpun=!1;const spins=[10,20,50,-15,-25,-35,-100,-50,100,250,-1e3,1250],waitMs=e=>new Promise(t=>setTimeout(t,e));async function spinWheel(){if(window.alreadySpun);else{window.alreadySpun=!0,document.getElementById("playBtn").style.display="none",document.getElementById("backBtn").style.display="none";let e=new XMLHttpRequest;e.open("GET","/api/casino/spinner/spinWheel",!0),e.withCredentials=!0,e.onreadystatechange=async()=>{if(e.readyState===XMLHttpRequest.DONE&&200===e.status){let t=await JSON.parse(JSON.parse(e.responseText)),n=t.spin;document.getElementById("wheel").className="spinc"+n,await waitMs(8015),spins[n]>0?document.getElementById("result").innerHTML="You won "+Math.abs(spins[n])+" points <br>":document.getElementById("result").innerHTML="You lost "+Math.abs(spins[n])+" points <br>",document.getElementById("result").style.display="inherit",document.getElementById("playBtn").style.display="inherit",document.getElementById("backBtn").style.display="inherit",window.alreadySpun=!1}else if(401===e.status)return console.log("401 unauth"),window.location.href="/login","401";else if(400===e.status)return console.log("400 failure"),"400";else if(500===e.status)return console.log("500 failure"),"500";else if(403===e.status&&6451==e.responseText){if(e.readyState===XMLHttpRequest.DONE)throw console.log("403 access denied"),document.getElementById("result").innerHTML="You have a balance of under -2000 points, you cannot gamble!",document.getElementById("result").style.display="inherit",Error("unable to gamble")}else console.log("awaiting response")},e.send()}}function goToHome(){history.back()}