var allTeams=[];async function getEventTeams(){let t=new XMLHttpRequest;t.open("GET",`/api/events/current/${document.getElementById("eventCode").value}/teams`,!0),t.withCredentials=!0,t.onreadystatechange=async()=>{t.readyState===XMLHttpRequest.DONE&&200===t.status?allTeams=t.responseText.split(","):401===t.status?window.location.href="/login":400===t.status?document.getElementById("viewNoteButton").innerHTML="bad request":500===t.status?document.getElementById("viewNoteButton").innerHTML="internal server error":403===t.status?document.getElementById("viewNoteButton").innerHTML="access denied":console.log("awaiting response")},t.send()}try{response=await fetch("/api/whoami",{method:"GET",credentials:"include",redirect:"follow"}),(401===response.status||403===response.status)&&(window.location.href="/login")}catch(t){console.log("failure"),window.location.href="/login"}function getAllCells(){var t=[];for(let e=1;e<4;e++)for(let n=1;n<10;n++)t.push(document.getElementById("sgc_"+e+"_"+n));return t}getEventTeams(),document.getElementById("eventCode").addEventListener("change",async function(){console.log(getEventTeams()),console.log(allTeams)}),document.getElementById("validateTeamInput").addEventListener("input",function(t){console.log("event!"),allTeams.includes(document.getElementById("validateTeamInput").value)?(document.getElementById("invalidTeamInput").style.display="none",document.getElementById("submitButton").removeAttribute("disabled")):(document.getElementById("invalidTeamInput").style.display="inherit",document.getElementById("submitButton").setAttribute("disabled","disabled"))}),document.getElementById("validateLength").addEventListener("input",()=>{let t=document.getElementById("validateLength").value;t<=120&&t>=0?(document.getElementById("tooLong").style.display="none",submitButton.removeAttribute("disabled")):(document.getElementById("tooLong").style.display="inherit",submitButton.setAttribute("disabled","disabled"))}),window.innerHeight>window.innerWidth&&(document.getElementById("landscapeReminder").style.display="inline"),window.addEventListener("resize",function(t){window.innerHeight>window.innerWidth?document.getElementById("landscapeReminder").style.display="inline":document.getElementById("landscapeReminder").style.display="none"});var sgCellStatus=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];const allCells=getAllCells();function processCellClick(t,e){sgCellStatus[Number(t)]=e,document.getElementById("griddata").value=sgCellStatus.join(""),console.log(document.getElementById("griddata").value)}function setGray(t){t.innerText="","true"==t.getAttribute("data-coop")?t.style.background="#bbb":t.style.background="#ddd",t.setAttribute("data-state","0"),processCellClick(t.getAttribute("data-num"),0)}function setSingleCube(t){t.style.background="#a216a2",t.innerText="",t.setAttribute("data-state","1"),processCellClick(t.getAttribute("data-num"),1)}function setSingleCone(t){t.style.background="#ff0",t.innerText="",t.setAttribute("data-state","2"),processCellClick(t.getAttribute("data-num"),2)}function setDoubleCube(t){t.style.background="#a216a2",t.style.color="#ff0",t.innerText="2",t.setAttribute("data-state","3"),processCellClick(t.getAttribute("data-num"),3)}function setDoubleCone(t){t.style.background="#ff0",t.style.color="#a216a2",t.innerText="2",t.setAttribute("data-state","5"),processCellClick(t.getAttribute("data-num"),4)}for(var i=0;i<allCells.length;i+=1)allCells[i].addEventListener("click",function(t){"cube"===this.getAttribute("data-gp")?"0"===this.getAttribute("data-state")?setSingleCube(this):"1"===this.getAttribute("data-state")?setDoubleCube(this):setGray(this):"cone"===this.getAttribute("data-gp")?"0"===this.getAttribute("data-state")?setSingleCone(this):"2"===this.getAttribute("data-state")?setDoubleCone(this):setGray(this):"h"===this.getAttribute("data-gp")&&("1"===this.getAttribute("data-state")?setSingleCone(this):"0"===this.getAttribute("data-state")?setSingleCube(this):"3"===this.getAttribute("data-state")?setDoubleCone(this):"2"===this.getAttribute("data-state")?setDoubleCube(this):setGray(this))});function goToHome(){history.back()}