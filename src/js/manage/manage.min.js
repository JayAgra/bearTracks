function newSearch(){location.reload()}async function getData(){document.getElementById("viewData").innerHTML="requesting...";try{e=await fetch("/api/manage/list",{method:"GET",credentials:"include",redirect:"follow"}),403===e.status&&(document.getElementById("viewData").innerHTML="access denied"),401===e.status&&(window.location.href="/login"),t=await e.json();for(var e,t,n="",a=t.length-1;a>=0;a--)n+=`<fieldset><span><span>ID:&emsp;${t[a].id}</span>&emsp;&emsp;<span><a href="/detail?id=${t[a].id}" style="all: unset; color: #2997FF; text-decoration: none;">View</a>&emsp;<span onclick="deleteSubmission(${t[a].id}, 'main${t[a].id}')" style="color: red" id="main${t[a].id}">Delete</span></span></span></fieldset>`;document.getElementById("resultsInsert").insertAdjacentHTML("afterbegin",n),document.getElementById("search").style.display="none",document.getElementById("results").style.display="flex"}catch(s){console.log("failure"),document.getElementById("viewData").innerHTML="internal server error",console.error(s)}}async function deleteSubmission(e,t){document.getElementById(t).innerHTML="Preparing Request...";let n=new XMLHttpRequest;n.open("GET",`/api/manage/${e}/delete`,!0),n.withCredentials=!0,n.onreadystatechange=()=>{n.readyState===XMLHttpRequest.DONE&&200===n.status?(console.log(n.responseText),document.getElementById(t).innerHTML="deleted!"):403===n.status?document.getElementById(t).innerHTML="access denied":401===n.status?window.location.href="/login":500===n.status?document.getElementById(t).innerHTML="500 bad request":document.getElementById(t).innerHTML="deleting..."},n.send()}