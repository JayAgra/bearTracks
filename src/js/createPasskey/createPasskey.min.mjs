import{startRegistration as e}from"https://unpkg.com/@simplewebauthn/browser/dist/bundle/index.umd.min.js";import{_get as t}from"../_modules/get/get.js";const n=document.getElementById("createPk"),r=document.getElementById("success"),i=document.getElementById("error");n.addEventListener("click",(async()=>{let n;r.innerHTML="",i.innerHTML="",t("/api/auth/createPasskey","error").then((async t=>{n=await e(t)})).catch((e=>{"InvalidStateError"===e.name?i.innerText="already registered authenticator":i.innerText=e}));const a=await fetch("/api/auth/verifyPasskey",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),s=await a.json();s&&s.verified?r.innerHTML="success":r.innerHTML=`error<br><br><pre>${JSON.stringify(s)}</pre>`}));