import{_get as e}from"../_modules/get/get.js";let elemBegin=document.getElementById("createPk"),elemSuccess=document.getElementById("success"),elemError=document.getElementById("error");elemBegin.addEventListener("click",async()=>{elemSuccess.innerHTML="",elemError.innerHTML="";let r;e("/api/auth/createPasskey","error").then(async e=>{r=await startRegistration(e)}).catch(e=>{"InvalidStateError"===e.name?elemError.innerText="already registered authenticator":elemError.innerText=e});let t=await fetch("/api/auth/verifyPasskey",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),n=await t.json();n&&n.verified?elemSuccess.innerHTML="success":elemSuccess.innerHTML=`error<br><br><pre>${JSON.stringify(n)}</pre>`});