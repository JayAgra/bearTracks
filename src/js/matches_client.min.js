const waitMs=e=>new Promise(t=>setTimeout(t,e));function goToHome(){window.location.href="/"}async function getMatches(){var e="";e=document.getElementById("allmatch").checked?"all":"team",eventCode=document.getElementById("eventCode").value,document.getElementById("viewMatchButton").innerHTML="Requesting Data...";let t=new XMLHttpRequest;t.open("GET",`/api/matches/2023/${eventCode}/qual/${e}`,!0),t.withCredentials=!0,t.onreadystatechange=async()=>{if(t.readyState===XMLHttpRequest.DONE&&200===t.status){console.log("200 ok"),console.log(t.responseText),matchesJSON=JSON.parse(t.responseText),document.getElementById("viewMatchButton").innerHTML="Rendering View...";var e="";for(let a=0;a<matchesJSON.Schedule.length;a++)e+=`<fieldset><label>${matchesJSON.Schedule[a].description}<br>${matchesJSON.Schedule[a].startTime.replace("T"," ")}</label><br><span style="color: #FF4000;"><a href="browse?number=${matchesJSON.Schedule[a].teams[0].teamNumber}&type=team&event=${eventCode}">${matchesJSON.Schedule[a].teams[0].teamNumber}</a>&emsp;<a href="browse?number=${matchesJSON.Schedule[a].teams[1].teamNumber}&type=team&event=${eventCode}">${matchesJSON.Schedule[a].teams[1].teamNumber}</a>&emsp;<a href="browse?number=${matchesJSON.Schedule[a].teams[2].teamNumber}&type=team&event=${eventCode}">${matchesJSON.Schedule[a].teams[2].teamNumber}</a></span><br><span style="color: #00BFFF;"><a href="browse?number=${matchesJSON.Schedule[a].teams[3].teamNumber}&type=team&event=${eventCode}">${matchesJSON.Schedule[a].teams[3].teamNumber}</a>&emsp;<a href="browse?number=${matchesJSON.Schedule[a].teams[4].teamNumber}&type=team&event=${eventCode}">${matchesJSON.Schedule[a].teams[4].teamNumber}</a>&emsp;<a href="browse?number=${matchesJSON.Schedule[a].teams[5].teamNumber}&type=team&event=${eventCode}">${matchesJSON.Schedule[a].teams[5].teamNumber}</a></span></fieldset>`;document.getElementById("matchHeader").insertAdjacentHTML("afterend",e),document.getElementById("search").style.display="none",document.getElementById("results").style.display="flex",document.getElementById("viewMatchButton").innerHTML="View"}else 401===t.status?(console.log("401 failure"),document.getElementById("viewMatchButton").innerHTML="401 Unauthorized",await waitMs(1e3),window.location.href="/login"):400===t.status?(console.log("400 failure"),document.getElementById("viewMatchButton").innerHTML="400 Bad Request"):500===t.status?(console.log("500 failure"),document.getElementById("viewMatchButton").innerHTML="500 Internal Server Error"):(console.log("awaiting response"),document.getElementById("viewMatchButton").innerHTML="Downloading Data...")},t.send()}