import{_post as e}from"../_modules/post/post.min.js";let codeBoxes=document.querySelectorAll("[kind=join]");function codeBoxKeyUp(e,a){let o=a.key;Array.from(Array(10).keys()).includes(Number(o))||"Backspace"===o?(1===a.target.value.length&&(4!==e?codeBoxes[e+1].focus():(a.target.blur(),document.querySelector("[name=access]").value=codeBoxes[0].value+codeBoxes[1].value+codeBoxes[2].value+codeBoxes[3].value+codeBoxes[4].value,document.querySelector("[name=full_name]").focus())),"Backspace"===o&&codeBoxes[e-1].focus()):a.target.value=""}function codeBoxFocus(e,a){for(var o=1;o<e;o++){let s=codeBoxes[o];if(!s.value){s.focus();break}}}async function uploadForm(){let a=document.getElementById("error"),o={access:document.querySelector("[name=access]").value,full_name:document.querySelector("[name=full_name]").value,username:document.querySelector("[name=username]").value,password:document.querySelector("[name=password]").value};e("/api/v1/auth/create",a.id,o).then(async e=>{switch(e.status){case"username_taken":a.innerText="username taken",a.style.display="unset";break;case"bad_access_key":a.innerText="bad access key",a.style.display="unset";break;case"password_length":a.innerText="password length bad ( 8 <= len <= 32 )",a.style.display="unset";break;case"success":window.location.href="/login";break;default:a.innerText="internal server error",a.style.display="unset"}}).catch(e=>{document.getElementById("error").innerText="unknown error"})}codeBoxes.forEach((e,a)=>{e.onkeyup=e=>{codeBoxKeyUp(a,e)},e.onfocus=e=>{codeBoxFocus(a,e)}}),document.getElementById("create_button").onclick=uploadForm;