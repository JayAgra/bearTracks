import{_post as e}from"../_modules/post/post.min.js";var isPkBtn=!1;let nextBtn=document.getElementById("next"),infoInput=document.getElementById("inputInfo"),currentUsernameInd=document.getElementById("currentUsername"),passwordLoginButton=document.getElementById("pw"),createAccountButton=document.getElementById("createAct"),errorElement=document.getElementById("error"),inputPassword=document.getElementById("inputPassword");function setCooky(e){document.cookie=e+"=true; expires="+new Date(Date.now()+864e5).toUTCString()+"; path=/"}async function uploadForm(){let t=document.getElementById("error"),n={username:document.querySelector("[name=username]").value,password:document.querySelector("[name=password]").value};e("/api/v1/auth/login",t.id,n).then(async e=>{switch(e.status){case"success":window.location.href="/";break;case"success_adm":setCooky("lead"),window.location.href="/";break;case"success_ctl":setCooky("childTeamLead"),window.location.href="/";break;case"bad":t.innerText="bad credentials",t.style.display="flex",await new Promise(e=>setTimeout(e,1e3)),window.location.reload()}}).catch(e=>{document.getElementById("error").innerText="unknown error"})}nextBtn.addEventListener("click",async()=>{if(errorElement.innerText="",!isPkBtn){if(0===infoInput.value.length){infoInput.classList.add("shakeInput"),await new Promise(e=>setTimeout(e,500)),infoInput.classList.remove("shakeInput");return}infoInput.classList.add("fade"),currentUsernameInd.firstChild.innerText="username",currentUsernameInd.children[1].innerText=infoInput.value,nextBtn.classList.add("nextStepPk"),infoInput.classList.add("fadeIn"),passwordLoginButton.style.opacity="0",passwordLoginButton.style.display="",passwordLoginButton.classList.add("nextStepPw"),createAccountButton.classList.add("moveDown"),await new Promise(e=>setTimeout(e,100)),infoInput.style.display="none",inputPassword.style.display="unset",passwordLoginButton.removeAttribute("disabled"),isPkBtn=!0}}),passwordLoginButton.onclick=uploadForm;