import{_delete as t}from"../_modules/delete/delete.min.js";import{_get as n}from"../_modules/get/get.min.js";import{_patch as e}from"../_modules/patch/patch.min.js";async function getScoutsDataMgmt(){n("/api/v1/manage/all_users",null).then(t=>{for(var n="",e=0;e<t.length;e++)"true"==t[e].admin?n+=`<tr class="padded"><td>${t[e].username} (${t[e].team})</td><td><div class="inlineInput"><input type="tel" id="${t[e].id}_input" value="${t[e].score}" style="min-width: 150px"><button class="uiButton actionButton" onclick="updateUser('${t[e].id}', ${t[e].score}, this)">save</button></div></td><td><div class="inlineInput"><button class="uiButton cancelButton" onclick="modifyAdmin('${t[e].id}', this, false)">remove admin</button></div></td></tr>`:0!==t[e].team_admin?n+=`<tr class="padded"><td>${t[e].username} (${t[e].team})</td><td><div class="inlineInput"><input type="tel" id="${t[e].id}_input" value="${t[e].score}" style="min-width: 150px"><button class="uiButton actionButton" onclick="updateUser('${t[e].id}', ${t[e].score}, this)">save</button></div></td><td><div class="inlineInput"><button class="uiButton cancelButton" onclick="modifyTeamAdmin('${t[e].id}', '0', this)">remove team admin</button><button class="uiButton cancelButton" onclick="modifyAdmin('${t[e].id}', this, true)">make admin</button><button class="uiButton cancelButton" onclick="userAdminAction('${t[e].id}', 'delete', this)">delete user</button></div></td></tr>`:n+=`<tr class="padded"><td>${t[e].username} (${t[e].team})</td><td><div class="inlineInput"><input type="tel" id="${t[e].id}_input" value="${t[e].score}" style="min-width: 150px"><button class="uiButton actionButton" onclick="updateUser('${t[e].id}', ${t[e].score}, this)">save</button></div></td><td><div class="inlineInput"><button class="uiButton cancelButton" onclick="modifyTeamAdmin('${t[e].id}', '${t[e].team}', this)">make team admin</button><button class="uiButton cancelButton" onclick="modifyAdmin('${t[e].id}', this, true)">make admin</button><button class="uiButton cancelButton" onclick="userAdminAction('${t[e].id}', 'delete', this)">delete user</button></div></td></tr>`;document.getElementById("tableHeader").insertAdjacentHTML("afterend",n)}).catch(t=>console.log(t))}async function updateUser(t,n,i){i.innerText="...",e(`/api/v1/manage/user/update_points/${t}/${Number(document.getElementById(`${t}_input`).value)-Number(n)}`,i.id).then(t=>{3206===t.status?i.innerText="done":i.innerText="error"}).catch(t=>console.log(t))}async function userAdminAction(n,e,i){i.innerText="...",t(`/api/v1/manage/user/delete/${n}`,i.id).then(t=>{3206===t.status?i.innerText="done":i.innerText="error"}).catch(t=>console.log(t))}async function modifyAdmin(t,n,i){n.innerText="...",e(`/api/v1/manage/user/update_admin/${t}/${i}`,n.id).then(t=>{3206===t.status?n.innerText="done":n.innerText="error"}).catch(t=>console.log(t))}async function modifyTeamAdmin(t,n,i){i.innerText="...",e(`/api/v1/manage/user/update_team_admin/${t}/${n}`,i.id).then(t=>{3206===t.status?i.innerText="done":i.innerText="error"}).catch(t=>console.log(t))}window.getScoutsDataMgmt=getScoutsDataMgmt,window.updateUser=updateUser,window.userAdminAction=userAdminAction,window.modifyAdmin=modifyAdmin,window.modifyTeamAdmin=modifyTeamAdmin;