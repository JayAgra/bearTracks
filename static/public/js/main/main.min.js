"use strict";var __awaiter=this&&this.__awaiter||function(e,t,n,c){return new(n||(n=Promise))((function(o,u){function a(e){try{m(c.next(e))}catch(e){u(e)}}function r(e){try{m(c.throw(e))}catch(e){u(e)}}function m(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}m((c=c.apply(e,t||[])).next())}))},__generator=this&&this.__generator||function(e,t){var n,c,o,u,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function r(r){return function(m){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,r[0]&&(a=0)),a;)try{if(n=1,c&&(o=2&r[0]?c.return:r[0]?c.throw||((o=c.return)&&o.call(c),0):c.next)&&!(o=o.call(c,r[1])).done)return o;switch(c=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,c=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],c=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,m])}}};Object.defineProperty(exports,"__esModule",{value:!0});var match_schedule,get_min_js_1=require("../_modules/get/get.min.js"),post_min_js_1=require("../_modules/post/post.min.js"),API_META="/api/v1/data",API_MATCHES=["/api/v1/events/matches/","/","/qual/true"],API_WHOAMI="/api/v1/whoami",API_SUBMIT="/api/v1/data/submit";function getEventCookie(){var e=RegExp("92bdcf1af0a0a23d=[^;]+").exec(document.cookie);return decodeURIComponent(e?e.toString().replace(/^[^=]+./,""):"")}function init(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:return""==getEventCookie()&&(document.cookie="92bdcf1af0a0a23d=CAFR; expires=Fri, 31 Dec 9999 23:59:59 GMT; Secure; SameSite=Lax"),document.getElementById("selected_event_code").innerText=getEventCookie(),(0,get_min_js_1._get)(API_WHOAMI,null).then((function(e){console.info(e)})).catch((function(e){console.error(e),window.location.href="/login"})),[4,load_matches(getEventCookie())];case 1:return e.sent(),document.getElementById("match_num_input").addEventListener("change",(function(){match_num_entry(document.getElementById("match_num_input").value)})),[2]}}))}))}function load_matches(e){void 0===e&&(e="CAFR"),document.getElementsByClassName("continue_button")[0].disabled=!0,(0,get_min_js_1._get)(API_MATCHES[0]+"2024"+API_MATCHES[1]+e+API_MATCHES[2],null).then((function(e){0!=e.Schedule.length?(match_schedule=e.Schedule,document.getElementById("match_num_input").innerHTML="",e.Schedule.forEach((function(e){document.getElementById("match_num_input").insertAdjacentHTML("beforeend",'<option value="'.concat(e.matchNumber,'">').concat(e.matchNumber,"</option>"))})),match_num_entry("1"),document.getElementById("match_num_input").value="",document.getElementById("team_number").value=""):(alert("match schedule is not yet posted"),document.getElementById("match_num_input").innerHTML="")})).catch((function(e){alert("match schedule is not yet posted"),document.getElementById("match_num_input").innerHTML=""}))}function set_option(e,t){e.innerText=t,e.value=t}function match_num_entry(e){var t=Number(e),n=document.getElementsByClassName("teamNumOption");set_option(n[3],match_schedule[t-1].teams[0].teamNumber),set_option(n[4],match_schedule[t-1].teams[1].teamNumber),set_option(n[5],match_schedule[t-1].teams[2].teamNumber),set_option(n[0],match_schedule[t-1].teams[3].teamNumber),set_option(n[1],match_schedule[t-1].teams[4].teamNumber),set_option(n[2],match_schedule[t-1].teams[5].teamNumber)}document.getElementById("team_number").onchange=function(){""==document.getElementById("team_number").value?document.getElementsByClassName("continue_button")[0].disabled=!0:document.getElementsByClassName("continue_button")[0].disabled=!1},document.body.onload=init;var timer_buttons=Array.from(document.getElementsByClassName("time_button")),timer_displays=Array.from(document.getElementsByClassName("counter")),timer_id=[0,0,0],timer_times=[0,0,0];function start_timer(e){timer_id[e]=setInterval((function(){timer_times[e]+=.1,timer_displays[e].innerText=String(Math.round(10*timer_times[e])/10)}),100)}function stop_timer(e){clearInterval(timer_id[e])}timer_buttons[0].addEventListener("mousedown",(function(){start_timer(0)})),timer_buttons[0].addEventListener("mouseup",(function(){stop_timer(0)})),timer_buttons[0].addEventListener("touchstart",(function(){start_timer(0)})),timer_buttons[0].addEventListener("touchend",(function(){stop_timer(0)})),timer_buttons[1].addEventListener("mousedown",(function(){start_timer(1)})),timer_buttons[1].addEventListener("mouseup",(function(){stop_timer(1)})),timer_buttons[1].addEventListener("touchstart",(function(){start_timer(1)})),timer_buttons[1].addEventListener("touchend",(function(){stop_timer(1)})),timer_buttons[2].addEventListener("mousedown",(function(){start_timer(2)})),timer_buttons[2].addEventListener("mouseup",(function(){stop_timer(2)})),timer_buttons[2].addEventListener("touchstart",(function(){start_timer(2)})),timer_buttons[2].addEventListener("touchend",(function(){stop_timer(2)})),document.addEventListener("mouseup",(function(){stop_timer(0),stop_timer(1),stop_timer(2)})),document.addEventListener("touchend",(function(){stop_timer(0),stop_timer(1),stop_timer(2)}));var cycle_buttons=Array.from(document.getElementsByClassName("cycle_button")),cycle_data=[];function end_cycle(e){0==timer_times[0]&&0==timer_times[1]&&0==timer_times[2]||(cycle_data.push({score_type:e,intake:Math.round(10*timer_times[0])/10,travel:Math.round(10*timer_times[1])/10,outtake:Math.round(10*timer_times[2])/10}),timer_times=[0,0,0],timer_displays.forEach((function(e){e.innerText="0"}))),console.log(cycle_data)}function check_responses(){document.querySelector("[name=defense]").value.length>0&&document.querySelector("[name=driving]").value.length>0&&document.querySelector("[name=overall]").value.length>0?document.getElementsByClassName("continue_button")[2].disabled=!1:document.getElementsByClassName("continue_button")[2].disabled=!0}function submit(){if(0!=document.querySelector("[name=defense]").value.length&&0!=document.querySelector("[name=driving]").value.length&&0!=document.querySelector("[name=overall]").value.length&&0!=match_schedule.length&&0!=document.getElementById("match_num_input").value.length&&0!=document.getElementById("team_number").value.length){document.getElementById("form_content").style.display="none",document.getElementById("submit_page").style.display="block";var e=document.getElementById("submit_text"),t=document.getElementById("submit_progress"),n=document.getElementById("scout_again"),c=document.getElementById("success_seal"),o=document.getElementById("failure_seal");e.innerText="Submitting...",cycle_data.push({score_type:9,intake:Number(document.querySelector("[name=park]").checked),travel:Number(document.querySelector("[name=trap_note]").checked),outtake:Number(document.querySelector("[name=trap_note]").checked)}),cycle_data.push({score_type:10,intake:Number(document.querySelector("[name=shallow_cage]").checked),travel:Number(document.querySelector("[name=climb]").checked),outtake:Number(document.querySelector("[name=climb]").checked)}),cycle_data.push({score_type:11,intake:Number(document.querySelector("[name=buddy_climb]").checked),travel:Number(document.querySelector("[name=buddy_climb]").checked),outtake:Number(document.querySelector("[name=buddy_climb]").checked)}),cycle_data.push({score_type:14,intake:Number(document.querySelector("[name=auto_algae]").checked),travel:Number(document.querySelector("[name=auto_neutral]").checked),outtake:Number(document.querySelector("[name=auto_neutral]").checked)}),cycle_data.push({score_type:15,intake:Number(document.querySelector("[name=auto_coral]").checked),travel:Number(document.querySelector("[name=auto_wing]").checked),outtake:Number(document.querySelector("[name=auto_wing]").checked)}),cycle_data.push({score_type:13,intake:Number(document.querySelector("[name=auto_scores]").checked),travel:Number(document.querySelector("[name=auto_scores]").checked),outtake:Number(document.querySelector("[name=auto_scores]").checked)});var u={season:2025,event:getEventCookie(),match_num:Number(document.getElementById("match_num_input").value),level:"Qualification",team:Number(document.getElementById("team_number").value),game:JSON.stringify(cycle_data),defend:document.querySelector("[name=defense]").value,driving:document.querySelector("[name=driving]").value,overall:document.querySelector("[name=overall]").value};(0,post_min_js_1._post)(API_SUBMIT,null,u).then((function(o){t.value=100,n.style.display="unset",c.style.display="unset",e.innerText="Submitted!"})).catch((function(n){t.value=0,o.style.display="unset",e.innerHTML="Error!<br>".concat(n)}))}}function reset(){clearInterval(timer_id[0]),clearInterval(timer_id[1]),clearInterval(timer_id[2]),timer_id=[0,0,0],timer_times=[0,0,0],cycle_data=[],document.querySelector("[name=auto_algae]").value="0",document.querySelector("[name=auto_coral]").value="0",document.querySelector("[name=auto_scores]").value="0",document.querySelector("[name=defense]").value="",document.querySelector("[name=driving]").value="",document.querySelector("[name=overall]").value="",document.getElementById("team_number").value="",document.querySelector("[name=park]").checked=!1,document.querySelector("[name=shallow_cage]").checked=!1,document.querySelector("[name=deep_cage]").checked=!1,document.getElementById("submit_page").style.display="none",document.getElementById("form_content").style.display="block";var e=Array.from(document.getElementsByClassName("form_pages"));document.getElementsByClassName("continue_button")[0].disabled=!0,document.getElementsByClassName("continue_button")[2].disabled=!0,e[1].style.display="none",e[2].style.display="none",e[0].style.display="flex"}function advance_page(e){var t=Array.from(document.getElementsByClassName("form_pages"));t[e].style.display="none",t[e+1].style.display="flex"}cycle_buttons[0].addEventListener("click",(function(){end_cycle(4)})),cycle_buttons[1].addEventListener("click",(function(){end_cycle(5)})),cycle_buttons[2].addEventListener("click",(function(){end_cycle(6)})),cycle_buttons[3].addEventListener("click",(function(){end_cycle(7)})),cycle_buttons[4].addEventListener("click",(function(){end_cycle(8)})),document.querySelector("[name=defense]").onchange=check_responses,document.querySelector("[name=driving]").onchange=check_responses,document.querySelector("[name=overall]").onchange=check_responses,document.getElementById("scout_again").onclick=reset,document.getElementsByClassName("continue_button")[2].addEventListener("click",submit),document.getElementsByClassName("continue_button")[0].addEventListener("click",(function(){advance_page(0)})),document.getElementsByClassName("continue_button")[1].addEventListener("click",(function(){advance_page(1)}));