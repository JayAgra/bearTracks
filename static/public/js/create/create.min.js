import{_post as e}from"../_modules/post/post.min.js";let codeBoxes=document.querySelectorAll("[kind=join]");function codeBoxKeyUp(e,r){let o=r.key;Array.from(Array(10).keys()).includes(Number(o))||"Backspace"===o?(1===r.target.value.length&&(4!==e?codeBoxes[e+1].focus():(r.target.blur(),document.querySelector("[name=access]").value=codeBoxes[0].value+codeBoxes[1].value+codeBoxes[2].value+codeBoxes[3].value+codeBoxes[4].value,document.querySelector("[name=full_name]").focus())),"Backspace"===o&&codeBoxes[e-1].focus()):r.target.value=""}function codeBoxFocus(e,r){for(var o=1;o<e;o++){let a=codeBoxes[o];if(!a.value){a.focus();break}}}codeBoxes.forEach((e,r)=>{e.onkeyup=e=>{codeBoxKeyUp(r,e)},e.onfocus=e=>{codeBoxFocus(r,e)}});let errorElement=document.getElementById("error");async function errorReload(){errorElement.style.display="flex",await new Promise(e=>setTimeout(e,1500)),window.location.reload()}async function uploadForm(){let r={access:document.querySelector("[name=access]").value,full_name:document.querySelector("[name=full_name]").value,username:document.querySelector("[name=username]").value,password:document.querySelector("[name=password]").value};e("/api/v1/auth/create",errorElement.id,r).then(async e=>{switch(e.status){case"you_sketchy_motherfucker":errorElement.innerText='no special characters other than "_" or "-" in any field. 32 char max for all fields.',errorReload();break;case"username_taken":errorElement.innerText="username taken",errorReload();break;case"bad_access_key":errorElement.innerText="bad access key",errorReload();break;case"password_length":errorElement.innerText="password length bad ( 8 <= len <= 32 )",errorReload();break;case"success":window.location.href="/login";break;default:errorElement.innerText="internal server error",errorReload()}}).catch(e=>{errorElement.innerText="unknown error"})}document.getElementById("create_button").onclick=uploadForm;