function createChartDataset(e,t,a){return{label:e,data:a,fill:!0,borderColor:t,tension:.1}}function createChartData(e,t){return{labels:e,datasets:t}}function createChartConfig(e,t,a,s){return{type:e,data:t,options:{indexAxis:"x",responsive:!0,scales:{y:{min:0,max:s}},plugins:{title:{display:!0,text:a}}}}}function setNoResults(){document.getElementById("error").innerHTML="&emsp;no results",document.getElementById("error").style.display="unset"}async function constructGraphs(){var e,t=[],a=[],s=[];try{let r=await fetch(`/api/v1/data/brief/team/${new Date().getFullYear()}/${document.getElementById("eventCode").value}/${document.getElementById("teamNum").value}`,{method:"GET",credentials:"include",redirect:"follow"});(401===r.status||403===r.status)&&(window.location.href="/login"),204!==r.status&&r.ok||setNoResults(),(e=await r.json()).forEach(e=>{if(t.includes(e.match_num));else{t.push(e.match_num);let s=e.game.split(",");a.push({match_num:e.match_num,autoCharge:Number(s[4]),teleopCharge:Number(s[9]),cycle:Number(s[10]),lowCubes:Number(s[20]),lowCones:Number(s[12]),midCubes:Number(s[13]),midCones:Number(s[14]),highCubes:Number(s[15]),highCones:Number(s[16]),lowPcs:Number(s[17]),midPcs:Number(s[18]),highPcs:Number(s[19]),cubes:Number(s[21]),cones:Number(s[23]),grid:Number(s[24]),weight:Number(e.weight.split(",")[0])})}});var h={autoCharge:[],teleopCharge:[],cycle:[],lowCubes:[],lowCones:[],midCubes:[],midCones:[],highCubes:[],highCones:[],lowPcs:[],midPcs:[],highPcs:[],cubes:[],cones:[],grid:[],weight:[]};a.sort((e,t)=>e.match_num-t.match_num),a.forEach(e=>{s.push(String(e.match_num)),h.autoCharge.push(e.autoCharge),h.teleopCharge.push(e.teleopCharge),h.cycle.push(e.cycle),h.lowCubes.push(e.lowCubes),h.lowCones.push(e.lowCones),h.midCubes.push(e.midCubes),h.midCones.push(e.midCones),h.highCubes.push(e.highCubes),h.highCones.push(e.highCones),h.lowPcs.push(e.lowPcs),h.midPcs.push(e.midPcs),h.highPcs.push(e.highPcs),h.cubes.push(e.cubes),h.cones.push(e.cones),h.grid.push(e.grid),h.weight.push(e.weight)});let C=createChartConfig("line",createChartData(s,[createChartDataset("PERFORMANCE SCORE","#8ec07c",h.weight)]),"Match Performance Score",160),n=createChartConfig("line",createChartData(s,[createChartDataset("GRID POINTS","#8ec07c",h.grid)]),"Grid Points",160),c=createChartConfig("line",createChartData(s,[createChartDataset("CONES","#ff0",h.cones),createChartDataset("CUBES","#a216a2",h.cubes)]),"Cones & Cubes",18),i=createChartConfig("line",createChartData(s,[createChartDataset("AUTO","#b8bb26",h.autoCharge),createChartDataset("TELEOP","#83a598",h.teleopCharge)]),"Auto & Teleop Charging",14),o=createChartConfig("line",createChartData(s,[createChartDataset("CYCLE TIME","#8ec07c",h.cycle)]),"Cycle Time",120),l=createChartConfig("line",createChartData(s,[createChartDataset("LOW","#b8bb26",h.lowPcs),createChartDataset("MID","#fabd2f",h.midPcs),createChartDataset("HIGH","#83a598",h.highPcs)]),"Scoring Levels",10),u=createChartConfig("line",createChartData(s,[createChartDataset("CONES","#ff0",h.lowCones),createChartDataset("CUBES","#a216a2",h.lowCubes)]),"Low Cones & Cubes",10),g=createChartConfig("line",createChartData(s,[createChartDataset("CONES","#ff0",h.midCones),createChartDataset("CUBES","#a216a2",h.midCubes)]),"Mid Cones & Cubes",10),m=createChartConfig("line",createChartData(s,[createChartDataset("CONES","#ff0",h.highCones),createChartDataset("CUBES","#a216a2",h.highCubes)]),"High Cones & Cubes",10);new Chart(document.getElementById("weightChart"),C),new Chart(document.getElementById("gridPtsChart"),n),new Chart(document.getElementById("allConeCubeChart"),c),new Chart(document.getElementById("chargeChart"),i),new Chart(document.getElementById("cycleTimeChart"),o),new Chart(document.getElementById("allLevelsChart"),l),new Chart(document.getElementById("lowConeCubeChart"),u),new Chart(document.getElementById("midConeCubeChart"),g),new Chart(document.getElementById("highConeCubeChart"),m),document.getElementById("teamAtEvent").innerText=document.getElementById("teamNum").value,document.getElementById("search").style.display="none",document.getElementById("results").style.display="flex"}catch(d){setNoResults()}}